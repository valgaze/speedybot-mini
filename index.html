<div class="_6620a4fd mw8-l mw-100 w-100 w-two-thirds-l ph3-m pt2 pl0-ns pl2"><span><section class="e22ba268 ph2 ph0-ns ml0-ns mr3-ns black-80" id="tabpanel-readme" aria-labelledby="package-tab-readme" role="tabpanel" data-attribute=""><div class=""><article> <div class="_6d9832ac pr4-ns pl0-ns ph1-m pr3-m pr2  markdown" id="readme"><p align="center"> <a href="https://www.npmjs.com/package/speedybot-mini" rel="nofollow"><img src="https://github.com/valgaze/speedybot-mini/raw/deploy/docs/assets/logo.png?raw=true"></a> </p> <p align="center"> <b><a href="https://github.com/valgaze/speedybot-mini/blob/deploy/api-docs/modules.md#classes"><g-emoji class="g-emoji" alias="books" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4da.png">üìö</g-emoji> API Docs</a> | <a href="#quickstarts"><g-emoji class="g-emoji" alias="rocket" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png">üöÄ</g-emoji> Quickstarts</a></b> | <a href="https://github.com/valgaze/speedybot-mini/discussions"><g-emoji class="g-emoji" alias="speech_balloon" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4ac.png">üí¨</g-emoji> Get Help</a> </p> <p><a href="https://www.npmjs.com/package/speedybot-mini" rel="nofollow"><img src="https://camo.githubusercontent.com/280b02dc8dca39ab6663c1ee0545dcc73798233f4010a21fbe5a4134dd85ddff/68747470733a2f2f62616467652e667572792e696f2f6a732f737065656479626f742d6d696e692e737667" alt="npm version" data-canonical-src="https://badge.fury.io/js/speedybot-mini.svg" style="max-width: 100%;"></a></p> <h2><a id="user-content-speedybot-mini" class="anchor" aria-hidden="true" href="#speedybot-mini"><span aria-hidden="true" class="octicon octicon-link"></span></a>Speedybot-mini</h2> <p>Speedybot is a tool to take you from zero to a user-valuable bot as quickly as possible w/ a buttery-smooth developer experience. In short, Speedybot lets you focus on the stuff that actually matters-- content and powerful integrations.</p> <p>If you're in a hurry, see the <strong><a href="#quickstarts">quickstarts</a></strong> to get up and running fast on a variety of infrastructure (websockets, server, serverless, container-less, etc).</p> <ul> <li><g-emoji class="g-emoji" alias="star2" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f31f.png">üåü</g-emoji> Zero External Dependencies <g-emoji class="g-emoji" alias="star2" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f31f.png">üåü</g-emoji></li> <li>Adds support <strong><a href="#chips">tappable suggestion "chips"</a></strong> </li> <li>Includes <strong><a href="#speedycard">SpeedyCard card builder</a></strong> (create rich <strong><a href="https://developer.webex.com/docs/api/guides/cards" rel="nofollow">Adaptive Cards</a></strong> without wrangling JSON)</li> <li>Lots of handy utilities for things like <strong><a href="https://github.com/valgaze/speedybot-mini/blob/deploy/api-docs/classes/BotInst.md#methods">alerts, cards, files, and more</a></strong> </li> <li>Locale &amp; i18n support</li> <li>Runs on virtually any infrastructure-- servers, V8 isolates, containers, container-less, edge, etc</li> </ul> <p>The era of manually writing "handlers" or matching text with RegEx's is coming to an end (though Speedybot has several trick to make writing those easier). In the future, there will be far fewer "keyword" handlers and instead deeper integration with 3rd-party conversation services like <strong><a href="https://www.voiceflow.com/" rel="nofollow">Voiceflow</a></strong>, <strong><a href="https://aws.amazon.com/lex/" rel="nofollow">Amazon Lex</a></strong>, <strong><a href="https://cloud.google.com/dialogflow/docs" rel="nofollow">DialogFlow</a></strong> and Speedybot can help make that transition as smooth as possible</p> <h2><a id="user-content-quickstarts" class="anchor" aria-hidden="true" href="#quickstarts"><span aria-hidden="true" class="octicon octicon-link"></span></a>Quickstarts</h2> <p>You can get up and running FAST with Speedybot. Speedybot can run on a variety of architectures and environments</p> <ul> <li> <p><strong><a href="https://codepen.io/valgaze/pen/MWVjEZV" rel="nofollow">speedybot garage <g-emoji class="g-emoji" alias="wrench" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f527.png">üîß</g-emoji><g-emoji class="g-emoji" alias="robot" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f916.png">ü§ñ</g-emoji>, manage webhooks/secrets/admin</a></strong></p> </li> <li> <p><g-emoji class="g-emoji" alias="books" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4da.png">üìö</g-emoji> <strong><a href="https://github.com/valgaze/speedybot-mini/blob/deploy/api-docs/modules.md#classes">API Docs</a></strong></p> </li> </ul> <table> <thead> <tr> <th>Platform</th> <th>Needs server?</th> <th>Needs webhooks?</th> </tr> </thead> <tbody> <tr> <td><strong><a href="https://github.com/valgaze/speedybot-mini/tree/deploy/examples/websockets"><g-emoji class="g-emoji" alias="electric_plug" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f50c.png">üîå</g-emoji> Deploy with websockets</a></strong></td> <td><g-emoji class="g-emoji" alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td> <td><g-emoji class="g-emoji" alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td> </tr> <tr> <td><strong><a href="https://github.com/valgaze/speedybot-mini/tree/deploy/examples/express-incoming-webhook"><g-emoji class="g-emoji" alias="computer" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4bb.png">üíª</g-emoji> Deploy to Simple Express Server</a></strong></td> <td><g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">‚úÖ</g-emoji></td> <td><g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">‚úÖ</g-emoji></td> </tr> <tr> <td><strong><a href="https://github.com/valgaze/speedybot-mini/tree/deploy/examples/aws-lambda">Œª Deploy to AWS Lamda</a></strong></td> <td><g-emoji class="g-emoji" alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td> <td><g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">‚úÖ</g-emoji></td> </tr> <tr> <td><strong><a href="https://github.com/valgaze/speedybot-mini/tree/deploy/examples/worker"><g-emoji class="g-emoji" alias="fire" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f525.png">üî•</g-emoji> Deploy to Worker</a></strong></td> <td><g-emoji class="g-emoji" alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td> <td><g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">‚úÖ</g-emoji></td> </tr> <tr> <td><strong><a href="https://github.com/valgaze/speedybot-mini/tree/deploy/examples/deno"><g-emoji class="g-emoji" alias="t-rex" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f996.png">ü¶ñ</g-emoji> Deploy to Deno</a></strong></td> <td><g-emoji class="g-emoji" alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td> <td><g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">‚úÖ</g-emoji></td> </tr> </tbody> </table> <h2><a id="user-content-syntax" class="anchor" aria-hidden="true" href="#syntax"><span aria-hidden="true" class="octicon octicon-link"></span></a>Syntax</h2> <div class="highlight highlight-source-shell"><pre>npm install speedybot-mini</pre></div> <p><strong><a href="https://github.com/valgaze/speedybot-mini/blob/deploy/settings/config.ts">See starter bot</a></strong></p> <h2><a id="user-content-how-to-make-a-bot" class="anchor" aria-hidden="true" href="#how-to-make-a-bot"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to make a bot</h2> <h2><a id="user-content-keywords" class="anchor" aria-hidden="true" href="#keywords"><span aria-hidden="true" class="octicon octicon-link"></span></a>Keywords</h2> <p>Speedybot is made up of "handlers" that trigger based on special conditions-- depending on your needs you'll probably need only one or two in your project</p> <table> <thead> <tr> <th>Keyword</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><strong><a href="https://github.com/valgaze/speedybot-mini/blob/deploy/api-docs/classes/Speedybot.md#contains">.contains</a></strong></td> <td>This will match if a trigger phrase is the 1st or only word in a message sent from a user</td> </tr> <tr> <td><strong><a href="https://github.com/valgaze/speedybot-mini/blob/deploy/api-docs/classes/Speedybot.md#fuzzy">.fuzzy</a></strong></td> <td>This will match if a trigger phrase exists <em>anywhere</em> inside a message sent from the user</td> </tr> <tr> <td><strong><a href="https://github.com/valgaze/speedybot-mini/blob/deploy/api-docs/classes/Speedybot.md#exact">.exact</a></strong></td> <td>This will match if a trigger phrase is exactly (case-sensitve) a message sent from a user</td> </tr> <tr> <td><strong><a href="https://github.com/valgaze/speedybot-mini/blob/deploy/api-docs/classes/Speedybot.md#regex">.fuzzy</a></strong></td> <td>This will match if a message sent from a user passes the regex</td> </tr> <tr> <td><strong><a href="https://github.com/valgaze/speedybot-mini/blob/deploy/api-docs/classes/Speedybot.md#every">.every</a></strong></td> <td>This will match on every message from a user</td> </tr> <tr> <td><strong><a href="https://github.com/valgaze/speedybot-mini/blob/deploy/api-docs/classes/Speedybot.md#nlu">.nlu</a></strong></td> <td>This will match on every message from a user except if the trigger phrase is used by hard-coded handler, designed for use with natural language systems</td> </tr> <tr> <td><strong><a href="https://github.com/valgaze/speedybot-mini/blob/deploy/api-docs/classes/Speedybot.md#onSubmit">.onSubmit</a></strong></td> <td>This will trigger when data is sent from an <strong><a href="https://developer.webex.com/docs/api/guides/cards" rel="nofollow"></a></strong> </td> </tr> <tr> <td><strong><a href="https://github.com/valgaze/speedybot-mini/blob/deploy/api-docs/classes/Speedybot.md#onFile">.onFile</a></strong></td> <td>This will trigger every time a file is sent to the agent and will provide file meta data</td> </tr> <tr> <td><strong><a href="https://github.com/valgaze/speedybot-mini/blob/deploy/api-docs/classes/Speedybot.md#onCamera">.onCamera</a></strong></td> <td>This will trigger every time an image file sent to the agent</td> </tr> <tr> <td><strong><a href="https://github.com/valgaze/speedybot-mini/blob/deploy/api-docs/classes/Speedybot.md#noMatch">.noMatch</a></strong></td> <td>This will trigger if there are no registered handlers for the user's text</td> </tr> </tbody> </table> <details> <summary>Note on Precedence</summary> <p>Rule: the 1st registered handler will match in the event of a conflict</p> <p>Ex. Below since it was set first, fuzzy will take precedence over <code>contains</code></p> <div class="highlight highlight-source-ts"><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-smi">Speedybot</span><span class="pl-kos">,</span> <span class="pl-smi">Config</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"speedybot-mini"</span><span class="pl-kos">;</span> <span class="pl-k">const</span> <span class="pl-s1">botConfig</span>: <span class="pl-smi">Config</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span> <span class="pl-c1">token</span>: <span class="pl-s">"__REPLACE__ME__"</span><span class="pl-kos">,</span> <span class="pl-kos">}</span><span class="pl-kos">;</span> <span class="pl-c">// 1) Initialize your bot w/ config</span> <span class="pl-k">const</span> <span class="pl-smi">CultureBot</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">Speedybot</span><span class="pl-kos">(</span><span class="pl-s1">botConfig</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">.</span><span class="pl-en">fuzzy</span><span class="pl-kos">(</span><span class="pl-s">"hi"</span><span class="pl-kos">,</span> <span class="pl-kos">(</span><span class="pl-s1">$bot</span><span class="pl-kos">,</span> <span class="pl-s1">msg</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span><span class="pl-s">"Fuzzy launched"</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">.</span><span class="pl-en">contains</span><span class="pl-kos">(</span><span class="pl-s">"hi"</span><span class="pl-kos">,</span> <span class="pl-kos">(</span><span class="pl-s1">$bot</span><span class="pl-kos">,</span> <span class="pl-s1">msg</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span><span class="pl-s">"Contains launched"</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> </details> <p>See the main <strong><a href="https://github.com/valgaze/speedybot-mini/blob/HEAD/settings/config.ts">sample for all you can do</a></strong>, but here's how you could make a simple agent</p> <div class="highlight highlight-source-ts"><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-smi">Speedybot</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"speedybot-mini"</span><span class="pl-kos">;</span> <span class="pl-c">// In a production environment use a secrets manager to pass in token</span> <span class="pl-c">// Get a token: https://developer.webex.com/my-apps/new/bot</span> <span class="pl-k">const</span> <span class="pl-s1">botConfig</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span> <span class="pl-c1">token</span>: <span class="pl-s">"__REPLACE__ME__"</span> <span class="pl-kos">}</span><span class="pl-kos">;</span> <span class="pl-c">// 1) Initialize your bot w/ config</span> <span class="pl-k">const</span> <span class="pl-smi">CultureBot</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">Speedybot</span><span class="pl-kos">(</span><span class="pl-s1">botConfig</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// 2) Export your bot</span> <span class="pl-k">export</span> <span class="pl-k">default</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">;</span> <span class="pl-c">// 3) Do whatever you want!</span> <span class="pl-c">// Match handlers based on user input</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">.</span><span class="pl-en">contains</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-s">"hi"</span><span class="pl-kos">,</span> <span class="pl-s">"yo"</span><span class="pl-kos">,</span> <span class="pl-s">"hola"</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-k">async</span> <span class="pl-kos">(</span><span class="pl-s1">$bot</span><span class="pl-kos">,</span> <span class="pl-s1">msg</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span><span class="pl-s">`You said '<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">msg</span><span class="pl-kos">.</span><span class="pl-c1">text</span><span class="pl-kos">}</span></span>', <span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">msg</span><span class="pl-kos">.</span><span class="pl-c1">author</span><span class="pl-kos">.</span><span class="pl-c1">displayName</span><span class="pl-kos">}</span></span>!`</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span> <span class="pl-s1">$bot</span> <span class="pl-kos">.</span><span class="pl-en">card</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">title</span>: <span class="pl-s">`Hi <span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">msg</span><span class="pl-kos">.</span><span class="pl-c1">author</span><span class="pl-kos">.</span><span class="pl-c1">displayName</span><span class="pl-kos">}</span></span>!`</span><span class="pl-kos">,</span> <span class="pl-c1">subTitle</span>: <span class="pl-s">`Glad to have you here, you said <span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">msg</span><span class="pl-kos">.</span><span class="pl-c1">text</span><span class="pl-kos">}</span></span>`</span><span class="pl-kos">,</span> <span class="pl-c1">chips</span>: <span class="pl-kos">[</span><span class="pl-s">"ping"</span><span class="pl-kos">,</span> <span class="pl-s">"pong"</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-kos">.</span><span class="pl-en">setInput</span><span class="pl-kos">(</span><span class="pl-s">`What's on your mind?`</span><span class="pl-kos">)</span> <span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// Can also do Regex's</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">.</span><span class="pl-en">regex</span><span class="pl-kos">(</span><span class="pl-k">new</span> <span class="pl-smi">RegExp</span><span class="pl-kos">(</span><span class="pl-s">"x"</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-kos">(</span><span class="pl-s1">$bot</span><span class="pl-kos">,</span> <span class="pl-s1">msg</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span><span class="pl-s">`Regex matched on this text:  <span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">msg</span><span class="pl-kos">.</span><span class="pl-c1">text</span><span class="pl-kos">}</span></span>`</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// Special keywords: .onSubmit, .onFile, .onCamera, .every, .noMatch, etc</span> <span class="pl-c">// Handle AdpativeCard submissions</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">.</span><span class="pl-en">onSubmit</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-s1">$bot</span><span class="pl-kos">,</span> <span class="pl-s1">msg</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span><span class="pl-s">`You submitted <span class="pl-s1"><span class="pl-kos">${</span><span class="pl-smi">JSON</span><span class="pl-kos">.</span><span class="pl-en">stringify</span><span class="pl-kos">(</span><span class="pl-s1">msg</span><span class="pl-kos">.</span><span class="pl-c1">data</span><span class="pl-kos">.</span><span class="pl-c1">inputs</span><span class="pl-kos">)</span><span class="pl-kos">}</span></span>`</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// Runs on file upload, can pass bytes to 3rd-party service</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">.</span><span class="pl-en">onFile</span><span class="pl-kos">(</span><span class="pl-k">async</span> <span class="pl-kos">(</span><span class="pl-s1">$bot</span><span class="pl-kos">,</span> <span class="pl-s1">msg</span><span class="pl-kos">,</span> <span class="pl-s1">fileData</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span><span class="pl-s">`You uploaded '<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">fileData</span><span class="pl-kos">.</span><span class="pl-c1">fileName</span><span class="pl-kos">}</span></span>'`</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span><span class="pl-s">`snip: <span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">fileData</span><span class="pl-kos">.</span><span class="pl-c1">markdownSnippet</span><span class="pl-kos">}</span></span>`</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span><span class="pl-s1">fileData</span><span class="pl-kos">.</span><span class="pl-c1">data</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">config</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">matchText</span>: <span class="pl-c1">true</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// Runs on EVERY input, kinda like middleware</span> <span class="pl-c">// This is where you would interact with an NLU service like DialogFlow, Amazon Lex, Voiceflow, etc</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">.</span><span class="pl-en">every</span><span class="pl-kos">(</span><span class="pl-k">async</span> <span class="pl-kos">(</span><span class="pl-s1">$bot</span><span class="pl-kos">,</span> <span class="pl-s1">msg</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span> <span class="pl-k">const</span> <span class="pl-kos">{</span> text <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-s1">msg</span><span class="pl-kos">;</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">`.every handler ran with this text: '<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">text</span><span class="pl-kos">}</span></span>'`</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">config</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">skipList</span>: <span class="pl-kos">[</span><span class="pl-s">"$clear"</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// If no matched handlers</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">.</span><span class="pl-en">noMatch</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-s1">$bot</span><span class="pl-kos">,</span> <span class="pl-s1">msg</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">say</span><span class="pl-kos">(</span><span class="pl-s">`Bummer, there was no matching handler for '<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">msg</span><span class="pl-kos">.</span><span class="pl-c1">text</span><span class="pl-kos">}</span></span>'`</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>There's much more, see this <strong><a href="https://github.com/valgaze/speedybot-mini/blob/HEAD/settings/config.ts">sample for all you can do</a></strong></p> <h2><a id="user-content-speedycard" class="anchor" aria-hidden="true" href="#speedycard"><span aria-hidden="true" class="octicon octicon-link"></span></a>SpeedyCard</h2> <p>ex. Tell the bot "sendcard" to get a card, type into the card &amp; tap submit, catch submission using <em>&lt;@submit&gt;</em> and echo back to user.</p> <ul> <li> <p>Getting started with AdaptiveCards (<a href="https://developer.webex.com/docs/api/guides/cards" rel="nofollow">https://developer.webex.com/docs/api/guides/cards</a>) can be a bit cumbersome and error-prone</p> </li> <li> <p>SpeedyCard is a limited subset of AdaptiveCards with basic features with a focus on user interaction &amp; simplicity (title, text, input box, menu-select, no "collapsable" sections, etc)</p> </li> <li> <p>Inspired a bit by SwiftUI: <a href="https://developer.apple.com/xcode/swiftui/" rel="nofollow">https://developer.apple.com/xcode/swiftui/</a></p> </li> </ul> <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/valgaze/speedybot-mini/raw/deploy/docs/assets/demo_sendcard.gif"><img src="https://github.com/valgaze/speedybot-mini/raw/deploy/docs/assets/demo_sendcard.gif" alt="sb" style="max-width: 100%;"></a></p> <details> <summary>(Tap to see code)</summary> <div class="highlight highlight-source-ts"><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-smi">Speedybot</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"speedybot-mini"</span><span class="pl-kos">;</span> <span class="pl-c">// In a production environment use a secrets manager to pass in token</span> <span class="pl-c">// Get a token: https://developer.webex.com/my-apps/new/bot</span> <span class="pl-k">const</span> <span class="pl-s1">botConfig</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span> <span class="pl-c1">token</span>: <span class="pl-s">"__REPLACE__ME__"</span> <span class="pl-kos">}</span><span class="pl-kos">;</span> <span class="pl-c">// 1) Initialize your bot w/ config</span> <span class="pl-k">const</span> <span class="pl-smi">CultureBot</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">Speedybot</span><span class="pl-kos">(</span><span class="pl-s1">botConfig</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// 2) Export your bot</span> <span class="pl-k">export</span> <span class="pl-k">default</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">;</span> <span class="pl-c">// 3) Do whatever you want!</span> <span class="pl-c">// Match handlers based on user input like</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">.</span><span class="pl-en">contains</span><span class="pl-kos">(</span><span class="pl-s">"hi"</span><span class="pl-kos">,</span> <span class="pl-k">async</span> <span class="pl-kos">(</span><span class="pl-s1">$bot</span><span class="pl-kos">,</span> <span class="pl-s1">msg</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span><span class="pl-s">`You said '<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">msg</span><span class="pl-kos">.</span><span class="pl-c1">text</span><span class="pl-kos">}</span></span>', <span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">msg</span><span class="pl-kos">.</span><span class="pl-c1">author</span><span class="pl-kos">.</span><span class="pl-c1">displayName</span><span class="pl-kos">}</span></span>!`</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// Handle/capture AdpativeCard submissions</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">.</span><span class="pl-en">onSubmit</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-s1">$bot</span><span class="pl-kos">,</span> <span class="pl-s1">msg</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span><span class="pl-s">`You submitted <span class="pl-s1"><span class="pl-kos">${</span><span class="pl-smi">JSON</span><span class="pl-kos">.</span><span class="pl-en">stringify</span><span class="pl-kos">(</span><span class="pl-s1">msg</span><span class="pl-kos">.</span><span class="pl-c1">data</span><span class="pl-kos">.</span><span class="pl-c1">inputs</span><span class="pl-kos">)</span><span class="pl-kos">}</span></span>`</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// send a card</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">.</span><span class="pl-en">contains</span><span class="pl-kos">(</span><span class="pl-s">"sendcard"</span><span class="pl-kos">,</span> <span class="pl-k">async</span> <span class="pl-kos">(</span><span class="pl-s1">$bot</span><span class="pl-kos">,</span> <span class="pl-s1">msg</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span> <span class="pl-k">const</span> <span class="pl-s1">cardPayload</span> <span class="pl-c1">=</span> <span class="pl-s1">$bot</span> <span class="pl-kos">.</span><span class="pl-en">card</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">.</span><span class="pl-en">setTitle</span><span class="pl-kos">(</span><span class="pl-s">"System is üëç"</span><span class="pl-kos">)</span> <span class="pl-kos">.</span><span class="pl-en">setSubtitle</span><span class="pl-kos">(</span><span class="pl-s">"If you see this card, everything is working"</span><span class="pl-kos">)</span> <span class="pl-kos">.</span><span class="pl-en">setImage</span><span class="pl-kos">(</span><span class="pl-s">"https://i.imgur.com/SW78JRd.jpg"</span><span class="pl-kos">)</span> <span class="pl-kos">.</span><span class="pl-en">setInput</span><span class="pl-kos">(</span><span class="pl-s">`What's on your mind?`</span><span class="pl-kos">)</span> <span class="pl-kos">.</span><span class="pl-en">setTable</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-kos">[</span><span class="pl-s">`Bot's Time`</span><span class="pl-kos">,</span> <span class="pl-k">new</span> <span class="pl-smi">Date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">toTimeString</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">]</span><span class="pl-kos">]</span><span class="pl-kos">)</span> <span class="pl-kos">.</span><span class="pl-en">setData</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">mySpecialData</span>: <span class="pl-kos">{</span> <span class="pl-c1">a</span>: <span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-c1">b</span>: <span class="pl-c1">2</span> <span class="pl-kos">}</span> <span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-kos">.</span><span class="pl-en">setUrl</span><span class="pl-kos">(</span> <span class="pl-s">"https://www.youtube.com/watch?v=3GwjfUFyY6M"</span><span class="pl-kos">,</span> <span class="pl-s">"Take a moment to celebrate"</span> <span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> </details> <h2><a id="user-content-chips" class="anchor" aria-hidden="true" href="#chips"><span aria-hidden="true" class="octicon octicon-link"></span></a>Chips</h2> <p>ex. Tell the bot "chips" to get a card with tappable "chips"</p> <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/valgaze/speedybot-mini/raw/deploy/docs/assets/demo_chips.gif"><img src="https://github.com/valgaze/speedybot-mini/raw/deploy/docs/assets/demo_chips.gif" alt="sb" style="max-width: 100%;"></a></p> <details> <summary>(Tap to see code)</summary> <div class="highlight highlight-source-ts"><pre><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-smi">Speedybot</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"speedybot-mini"</span><span class="pl-kos">;</span> <span class="pl-c">// In a production environment use a secrets manager to pass in token</span> <span class="pl-c">// Get a token: https://developer.webex.com/my-apps/new/bot</span> <span class="pl-k">const</span> <span class="pl-s1">botConfig</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span> <span class="pl-c1">token</span>: <span class="pl-s">"__REPLACE__ME__"</span> <span class="pl-kos">}</span><span class="pl-kos">;</span> <span class="pl-c">// 1) Initialize your bot w/ config</span> <span class="pl-k">const</span> <span class="pl-smi">CultureBot</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">Speedybot</span><span class="pl-kos">(</span><span class="pl-s1">botConfig</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// 2) Export your bot</span> <span class="pl-k">export</span> <span class="pl-k">default</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">;</span> <span class="pl-c">// 3) Do whatever you want!</span> <span class="pl-c">// Match handlers based on user input like</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">.</span><span class="pl-en">contains</span><span class="pl-kos">(</span><span class="pl-s">"hi"</span><span class="pl-kos">,</span> <span class="pl-k">async</span> <span class="pl-kos">(</span><span class="pl-s1">$bot</span><span class="pl-kos">,</span> <span class="pl-s1">msg</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span><span class="pl-s">`You said '<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">msg</span><span class="pl-kos">.</span><span class="pl-c1">text</span><span class="pl-kos">}</span></span>', <span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">msg</span><span class="pl-kos">.</span><span class="pl-c1">author</span><span class="pl-kos">.</span><span class="pl-c1">displayName</span><span class="pl-kos">}</span></span>!`</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// Handle/capture AdpativeCard submissions (non-chip submission)</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">.</span><span class="pl-en">onSubmit</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-s1">$bot</span><span class="pl-kos">,</span> <span class="pl-s1">msg</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span><span class="pl-s">`You submitted <span class="pl-s1"><span class="pl-kos">${</span><span class="pl-smi">JSON</span><span class="pl-kos">.</span><span class="pl-en">stringify</span><span class="pl-kos">(</span><span class="pl-s1">msg</span><span class="pl-kos">.</span><span class="pl-c1">data</span><span class="pl-kos">.</span><span class="pl-c1">inputs</span><span class="pl-kos">)</span><span class="pl-kos">}</span></span>`</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">.</span><span class="pl-en">contains</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-s">"ping"</span><span class="pl-kos">,</span> <span class="pl-s">"pong"</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-kos">(</span><span class="pl-s1">$bot</span><span class="pl-kos">,</span> <span class="pl-s1">msg</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span> <span class="pl-k">const</span> <span class="pl-kos">{</span> text <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-s1">msg</span><span class="pl-kos">;</span> <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">text</span> <span class="pl-c1">===</span> <span class="pl-s">"ping"</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span><span class="pl-s">"pong"</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">text</span> <span class="pl-c1">===</span> <span class="pl-s">"pong"</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span><span class="pl-s">"ping"</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-kos">}</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// send a card with tappable chips</span> <span class="pl-smi">CultureBot</span><span class="pl-kos">.</span><span class="pl-en">contains</span><span class="pl-kos">(</span><span class="pl-s">"chips"</span><span class="pl-kos">,</span> <span class="pl-k">async</span> <span class="pl-kos">(</span><span class="pl-s1">$bot</span><span class="pl-kos">,</span> <span class="pl-s1">msg</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span> <span class="pl-s1">$bot</span><span class="pl-kos">.</span><span class="pl-en">send</span><span class="pl-kos">(</span> <span class="pl-s1">$bot</span> <span class="pl-kos">.</span><span class="pl-en">card</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">.</span><span class="pl-en">setChips</span><span class="pl-kos">(</span><span class="pl-kos">[</span> <span class="pl-s">"hey"</span><span class="pl-kos">,</span> <span class="pl-s">"ping"</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">label</span>: <span class="pl-s">"say the phrase pong"</span><span class="pl-kos">,</span> <span class="pl-c1">keyword</span>: <span class="pl-s">"pong"</span> <span class="pl-kos">}</span><span class="pl-kos">,</span> <span class="pl-kos">]</span><span class="pl-kos">)</span> <span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> </details> <h2><a id="user-content-creditsattribution" class="anchor" aria-hidden="true" href="#creditsattribution"><span aria-hidden="true" class="octicon octicon-link"></span></a>Credits/Attribution</h2> <ul> <li>Cookie image courtesy of Daniel Lopez: <a href="https://unsplash.com/photos/aT7CE57EZL8" rel="nofollow">https://unsplash.com/photos/aT7CE57EZL8</a> &amp; <a href="https://unsplash.com/@soydanielwolf" rel="nofollow">https://unsplash.com/@soydanielwolf</a> </li> </ul> </div></article></div><div class="pv4"><h2 id="user-content-keywords" class="a0dff0b1 mt2 pt2 mb3 pb3 f4 fw6 b--black-10">Keywords</h2><ul class="list pl0"><li class="dib mr2"><a class="_75a5f581 f4 fw6 fl db pv1 ma1 black-70 link hover-black animate" href="/search?q=keywords:bot">bot</a></li><li class="dib mr2"><a class="_75a5f581 f4 fw6 fl db pv1 ma1 black-70 link hover-black animate" href="/search?q=keywords:scaffold">scaffold</a></li><li class="dib mr2"><a class="_75a5f581 f4 fw6 fl db pv1 ma1 black-70 link hover-black animate" href="/search?q=keywords:continerless">continerless</a></li><li class="dib mr2"><a class="_75a5f581 f4 fw6 fl db pv1 ma1 black-70 link hover-black animate" href="/search?q=keywords:speedybot">speedybot</a></li><li class="dib mr2"><a class="_75a5f581 f4 fw6 fl db pv1 ma1 black-70 link hover-black animate" href="/search?q=keywords:serverless">serverless</a></li></ul></div></section><section class="e22ba268 ph2 ph0-ns ml0-ns mr3-ns black-80" id="tabpanel-explore" aria-labelledby="package-tab-explore" role="tabpanel" data-attribute="hidden"></section><section class="e22ba268 ph2 ph0-ns ml0-ns mr3-ns black-80" id="tabpanel-admin" aria-labelledby="package-tab-admin" role="tabpanel" data-attribute="hidden"></section><section class="e22ba268 ph2 ph0-ns ml0-ns mr3-ns black-80" id="tabpanel-dependencies" aria-labelledby="package-tab-dependencies" role="tabpanel" data-attribute="hidden"></section><section class="e22ba268 ph2 ph0-ns ml0-ns mr3-ns black-80" id="tabpanel-dependents" aria-labelledby="package-tab-dependents" role="tabpanel" data-attribute="hidden"></section><div class="e22ba268 ph2 ph0-ns ml0-ns mr3-ns black-80" id="tabpanel-versions" aria-labelledby="package-tab-versions" role="tabpanel" data-attribute="hidden"></div></span><span aria-live="polite"></span></div>
